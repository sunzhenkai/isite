webpackJsonp([6],{"725i":function(t,e){},IcnI:function(t,e,n){"use strict";var i=n("7+uW"),o=n("NYxO"),r=n("//Fk"),a=n.n(r),s=n("vLgD"),c="auth-token/",u="users/",l="user/info/",g=function(t){return Object(s.a)({method:"post",url:c,data:t})},f=function(t){return Object(s.a)({method:"post",url:u,data:t})},d=function(){return Object(s.a)({method:"get",url:l})},m=n("zL8q"),p=n("iPXC"),h={state:{userInfo:null,token:p.b.getCookie(p.a),loginRegisterModalVisible:!1,actionIsLogin:!0},getters:{userInfo:function(t){return t.userInfo},token:function(t){return t.token},getLoginRegisterModalVisible:function(t){return t.loginRegisterModalVisible},getActionIsLogin:function(t){return t.actionIsLogin},isLogin:function(t){return null!=t.userInfo}},actions:{actionObtainToken:function(t,e){var n=t.commit,i=e.data;return new a.a(function(t,e){g(i).then(function(e){n("setToken",e.token),n("setUserInfo",e.user),t()}).catch(function(t){e(t)})})},actionSetLoginRegisterModalVisible:function(t,e){var n=t.commit;t.state;n("setLoginRegisterModalVisible",e)},actionHideLoginRegisterModal:function(t){(0,t.commit)("setLoginRegisterModalVisible",!1)},actionShowLoginRegisterModal:function(t,e){var n=t.commit,i=e.actionIsLogin;n("setLoginRegisterModalVisible",!0),n("setActionIsLogin",i)},actionSetActionIsLogin:function(t,e){(0,t.commit)("setActionIsLogin",e.actionIsLogin)},actionUserRegister:function(t,e){var n=t.commit,i=t.dispatch,o=e.data;f(o).then(function(t){return n("setUserInfo",t),i("actionObtainToken",{data:o}),a.a.resolve()}).catch(function(t){return Object(m.Message)({message:t,type:"error",duration:3e3}),a.a.reject(t)})},actionGetUserInfo:function(t){var e=t.commit;d().then(function(t){e("setUserInfo",t)}).catch(function(t){return console.log("error: "+t),Object(m.Message)({message:"获取用户信息出错",type:"error",duration:3e3}),a.a.reject(t)})},actionLogout:function(t){var e=t.commit;e("setUserInfo",null),e("setToken",null)}},mutations:{setToken:function(t,e){e?p.b.setCookie(p.a,e):p.b.removeCookie(p.a),t.token=e},setUserInfo:function(t,e){t.userInfo=e},setLoginRegisterModalVisible:function(t,e){t.loginRegisterModalVisible=e},setActionIsLogin:function(t,e){t.actionIsLogin=e||!1}}},b=n("mYSu"),L={title:"",summary:"",tags:[],category:[],content:"",content_type:"MD",public:!1},v={state:{article:L,isLoading:!1},getters:{article:function(t){return t.article},isLoading:function(t){return t.isLoading}},actions:{actionSetArticle:function(t,e){var n=t.commit;t.state;n("setArticle",e.data)},actionClearArticle:function(t){(0,t.commit)("setArticle",{article:L})},actionFetchArticle:function(t,e){var n=t.commit,i=(t.state,e.id);n("setArticle",{article:L}),n("setLoading",!0),b.a.obtainArticleDetail({id:i}).then(function(t){n("setArticle",{article:t}),n("setLoading",!1)}).catch(function(t){n("setLoading",!1),Object(m.Message)({message:t,type:"error",duration:3e3})})}},mutations:{setArticle:function(t,e){var n=e.article;t.article=n},setLoading:function(t,e){t.isLoading=e}}},I={state:{categories:[]},getters:{categories:function(t){return t.categories}},actions:{actionFetchCategories:function(t){var e=t.commit;0===t.state.categories.length&&b.a.obtainCategoryTree().then(function(t){e("setCategories",{categories:t})}).catch(function(t){Object(m.Message)({message:t,type:"error",duration:3e3})})}},mutations:{setCategories:function(t,e){var n=e.categories;t.categories=n}}};i.default.use(o.a);e.a=new o.a.Store({modules:{UserStore:h,ArticleInfoStore:v,CategoryStore:I}})},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=n("VU/8")({name:"App",created:function(){this.$store.dispatch("actionFetchCategories"),!this.$store.getters.userInfo&&this.isLogin&&this.$store.dispatch("actionGetUserInfo")},computed:{isLogin:{get:function(){return this.$store.getters.token&&this.$store.getters.token.length>10}}}},o,!1,function(t){n("725i")},null,null).exports,a=n("/ocq");i.default.use(a.a);var s=new a.a({mode:"history",routes:[{path:"/",redirect:"article/list",name:"index",component:function(){return n.e(3).then(n.bind(null,"AkUR"))},children:[{path:"article/write",name:"writeArticle",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"bTEH"))}},{path:"article/list",name:"articleList",component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"QWGN"))}},{path:"article/detail/:id",name:"articleDetail",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"e9C3"))}}]}]}),c=n("IcnI"),u=n("zL8q"),l=n.n(u),g=(n("tvR6"),n("yh13"),n("JPH7")),f=n.n(g);i.default.config.productionTip=!1,i.default.use(l.a,{size:"medium"}),i.default.component("icon",f.a),new i.default({el:"#app",router:s,store:c.a,components:{App:r},template:"<App/>"})},iPXC:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("lbHh"),o=n.n(i),r="UserToken";e.b={getCookie:function(t){return o.a.get(t)},setCookie:function(t,e){return o.a.set(t,e)},removeCookie:function(t){return o.a.remove(t)}}},mYSu:function(t,e,n){"use strict";var i=n("vLgD"),o="articles/",r="article/category/tree/",a="articles/",s="articles/filter/";e.a={submitArticle:function(t){var e=t.data;return Object(i.a)({method:e.id?"put":"post",url:o+(e.id?e.id+"/":""),data:e})},obtainCategoryTree:function(){return Object(i.a)({method:"get",url:r})},obtainArticleSummaryList:function(t){var e=t.params,n=t.data;return Object(i.a)({method:"get",url:a,data:n,params:e})},obtainArticleDetail:function(t){var e=t.id;return Object(i.a)({method:"get",url:o+e+"/"})},filterArticle:function(t){var e=t.params,n=t.data;return Object(i.a)({method:"get",url:s,data:n,params:e})}}},tvR6:function(t,e){},vLgD:function(t,e,n){"use strict";var i=n("//Fk"),o=n.n(i),r=n("mtWM"),a=n.n(r),s=n("zL8q"),c=(n.n(s),n("iPXC")),u=n("IcnI"),l=a.a.create({baseURL:"/api/",timeout:15e3});l.interceptors.request.use(function(t){return c.b.getCookie(c.a)&&(t.headers={Authorization:"Token "+c.b.getCookie(c.a)}),t},function(t){console.log(t),o.a.reject(t)}),l.interceptors.response.use(function(t){return o.a.resolve(t.data)},function(t){return t&&401===t.response.status&&c.b.getCookie(c.a)?(c.b.removeCookie(c.a),u.a.dispatch("actionLogout"),Object(s.Message)({message:"登录过期,请重新登录!",type:"error",duration:3e3})):Object(s.Message)({message:t.response.data,type:"error",duration:3e3}),o.a.reject(t.response.data)}),e.a=l},yh13:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.12842a9c6251bcfb47d1.js.map